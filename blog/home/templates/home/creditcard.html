
<!DOCTYPE html>

<html >
<head>
 <meta charset="UTF-8">
 <title>Credit card validation with card</title>

 <form action="/home/" class="credit-card-div">

     {% csrf_token %}
       {{ form.as_p }}
     <!-- <script src="../../static/Total_Amount_Payment_Cookie.js"></script> -->

     </style>
     <script src="../../home/creditcardvalidator.js" type="text/javascript"></script>
     <link rel="stylesheet" href="../../static/credit_card_div.css">



</head>

<body onload="CreateAutofillCreditCardCookie()">
  <!-- <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/home/">Group 1 Grocery Store</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">

           <form action="search.html" type="get">
               <select id="drop_down_filter" name="drop_down_filter">
                   <option value="Categories">Categories</option>
                   <option value="Fruit">Disgusting Fruit</option>
                   <option value="Vegetable">Dirty Vegetables</option>
                   <option value="Meat">Spoiled Meat</option>
                   <option value="Dairy">Some Dairy</option>
               </select>
               <input id="search_bar" type="text" name="search_bar" placeholder="Search..." class="round">
               <button id="search_submit" type="submit">Go</button>
           </form>

          <li class="nav-item" style="">
            <a class="nav-link" href="http://127.0.0.1:8000/admin/">Admin Page</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="tracking_home">Tracking</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="contact_us">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="shoppingcart">
            <img src= "http://www.inmotionhosting.com/support/images/stories/icons/ecommerce/empty-cart-light.png" style="vertical-align: initial;" height="35" width="35">
            </a>

          </li>

          <li class="nav-item dropdown">

                <script type="text/javascript">
                  if(readCookie("username") != "" && readCookie("username") != null){
                    var name = readCookie("username");
                    document.write('<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownBlog" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">' + name + '</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownBlog">');
                    // document.write(' <a class="dropdown-item" href="shoppingcart">Shopping Cart</a>');
                    document.write(' <a class="dropdown-item" onclick="logout()">Log out</a></div>');
                  //  document.write('</div></li>');
                  }
                  else {
                    document.write('<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownBlog" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">My Account</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownBlog">');
                    document.write(' <a class="dropdown-item" href="login_register">Log in/Register</a>');
                    // document.write(' <a class="dropdown-item" href="shoppingcart">Shopping Cart</a></div>');
                  }

                </script>
        </li>
        </ul>
      </div>
    </div>
  </nav> -->


 <div class="body-text">Please enter Shipping and Payment Information.</div>
 <form>
   <div class="form-container">
     <div class="personal-information">
       <h1>Shipping Information</h1>
     </div> <!-- end of personal-information -->
     <input type="checkbox" name="destination" value="Destination" onclick="Autofill()"> To use existing address<br>
     <!-- <input id="input-field" type="text" name="Street_Name" required="required" autocomplete="Street_Name" maxlength="45" placeholder="Street Address"/> -->
     <!-- <input id="column-left" type="text" name="City" required="required" autocomplete="City" maxlength="40" placeholder="City"/>
     <input id="column-right" type="text" name="Zip_Code" required="required" autocomplete="Zip_Code" pattern="[0-9]*" maxlength="5" placeholder="ZIP code"/>
     <input id="input-field" type="text" name="State" required="required" autocomplete="State" minlength="2" maxlength="2" placeholder="State - Ex CA"/>
     <input id="input-field" type="email" name="email" required="required" autocomplete="email" maxlength="40" placeholder="Email Address"/> -->

     <input id="Street" type="text" name="Street_Name" required="required" autocomplete="Street_Name" maxlength="45" placeholder="Street Address"/>
     <input id="City" type="text" name="City" required="required" autocomplete="City" maxlength="40" placeholder="City"/>
     <input id="ZipCode" type="text" name="Zip_Code" required="required" autocomplete="Zip_Code" pattern="[0-9\s]*" maxlength="6" placeholder="ZIP code"/>
     <input id="State" type="text" name="State" required="required" autocomplete="State" minlength="2" maxlength="2" placeholder="State - Ex CA"/>



     <div class="personal-information">
       <h1>Credit Card Information</h1>
     </div> <!-- end of Credit Card-information -->
      <input type="checkbox" name="creditcard" value="CreditInfo" onclick="AutofillCreditCard()"> To use existing Credit Card<br>
         <input id="Name" type="text" name="NameOnCard" required="required" placeholder="Name"/>
         <input id="ZipCode1" type="text" name="Card_Zipcode" required="required" pattern="[0-9\s]*" minlength="4" maxlength="5" placeholder="Zip Code"/>
         <input id="CreditCardNum" type="text" size ="19" required="required" minlength="8" maxlength="19" pattern="[0-9\s]*" name="Credit_Card_Number" placeholder="1234 5678 9012 3456"/>
         <input id="ccv" type="text" name="CSV" pattern="[0-9\s]*" required="required" minlength="3" maxlength="5" placeholder="CCV"/>
         <div class="personal-information" id="expiration-date" required="required" name="ExpirationDate">
             <label>Expiration Date of Credit Card</label>
             <select>
                 <option value="01">January</option>
                 <option value="02">February </option>
                 <option value="03">March</option>
                 <option value="04">April</option>
                 <option value="05">May</option>
                 <option value="06">June</option>
                 <option value="07">July</option>
                 <option value="08">August</option>
                 <option value="09">September</option>
                 <option value="10">October</option>
                 <option value="11">November</option>
                 <option value="12">December</option>
             </select>
             <select>
                 <option value="16"> 2016</option>
                 <option value="17"> 2017</option>
                 <option value="18"> 2018</option>
                 <option value="19"> 2019</option>
                 <option value="20"> 2020</option>
                 <option value="21"> 2021</option>
                 <option value="22"> 2022</option>
                 <option value="23"> 2023</option>
             </select>
         </div>
         <input id="input-button" type="submit" href="/home" onclick="sendToHomePage()" name = "submit_payment" value="Submit"/>

         <!-- <input id="store" type="hidden" name="store_id" required="required" autocomplete="on" pattern=[0-9]* placeholder="store id, Select 1 or 2" -->
         <input id="store_id" type="hidden" name="store_id" value="1" />
         <input id="username_id" type="hidden" name="user_id" value="" />

 </form>
 <!-- <button onclick="CreateStoreCookie()"> CLICK TO CREATE COOKIE </button>
 <button onclick="ShowStoreCookie()"> CLICK TO SHOW COOKIE </button>
 <button onclick="DeleteStoreCookie()"> CLICK TO DELETE COOKIE </button> -->
</div>



<script type="text/javascript">

function AutofillCreditCard()
{

  var input = readCookie("CreditInfo");
  alert("Click Check Box: " + input);
  if(input != "" && input != null)
  {
    var array = input.split(",");
    var NameonCard1 = array[0];
    var zipcode1 = array[1];
    var CreditCardNumber= array[2];
    var ccv = array[3];

    var NameonCardInput = document.getElementById("Name");
    NameonCardInput.value = NameonCard1;
    var zipcodeinput = document.getElementById("ZipCode1");
    zipcodeinput.value = zipcode1;
    var CreditCardNumberinput = document.getElementById("CreditCardNum");
    CreditCardNumberinput.value = CreditCardNumber;
    var ccvinput = document.getElementById("ccv");
    ccvinput.value = ccv;



  }
}

function ShowAutofillCreditCardCookie()
{
  alert("CreditInfo: " + readCookie("CreditInfo"));
}
function DeleteAutofillCreditCardCookie()
{
  createCookie("CreditInfo", "", -1);
}
function CreateAutofillCreditCardCookie()
{
  createCookie("Destination", "1234 Main Street, San Jose, CA, 94521 ", 1);
  createCookie("CreditInfo", "Test,9342,92830284,8345 ", 1);
  //alert(readCookie("CreditInfo"));
}

<!-- THIS SCRIPT IS FOR AUTOFILLING THE SHIPPING INFORMATION -->
<script type="text/javascript">

function Autofill()
{

  var input = readCookie("Destination");
  alert("Click Check Box: " + input);
  if(input != "" && input != null)
  {
    var array = input.split(",");
    var streetname1 = array[0];
    var cityname = array[1];
    var statename= array[2];
    var zipcode1 = array[3];

    var streetinput = document.getElementById("Street");
    streetinput.value = streetname1;
    var citynameinput = document.getElementById("City");
    citynameinput.value = cityname;
    var statenameinput = document.getElementById("State");
    statenameinput.value = statename;
    var zipcodeinput = document.getElementById("ZipCode");
    zipcodeinput.value = zipcode1;



  }
}

function ShowAutofillCookie()
{
  alert("Store Cookie: " + readCookie("Destination"));
}
function DeleteAutofillCookie()
{
  createCookie("Destination", "", -1);
}
function CreateAutofillCookie()
{
  createCookie("Destination", "1234 Main street, San Jose, CA,94521", 1);
  alert(readCookie("Destination"));
}
</script>


<!--  THIS SCRIPT IS FOR STORE ID-->
<script type="text/javascript">
function DeleteAllCookies(){

  var MainCookie = readCookie("MainCookie"); //read the MainCookie
  if (MainCookie != "" && MainCookie != null)
  {
    var array = MainCookie.split(","); //split that result and turn it into an array with all the items

    //for each item in the array of the MainCookie
    for (var i = 0; i < array.length-1; i++)
    {
      eraseCookie(array[i]); //delete that item
    }
    createCookie("MainCookie", "", 1); //reset the MainCookie

  }
  alert(readCookie("MainCookie")); //display current MainCookie, which should be empty
}

 function SetStoreID()
 {
   var input = document.getElementById("store");
   input.value = readCookie("Store");
 }
 function ShowStoreCookie()
 {
   alert("Store Cookie: " + readCookie("Store"));
 }
 function DeleteStoreCookie()
 {
   createCookie("Store", "", -1);
 }
 function CreateStoreCookie()
 {
   createCookie("Store", "1", 1);
 }
 function createCookie(name,value,days)
 {
       if (days)
       {
           var date = new Date();
           date.setTime(date.getTime() + (days * 24 * 60 * 60 *1000));
           var expires = "; expires=" + date.toGMTString();
       }
       else
       {
           var expires = "";
       }
       document.cookie = name + "=" + value + expires + "; path=/";
 }
 function readCookie(name)
   {
     var nameEQ = name + "=";
     var ca = document.cookie.split(';');
     for(var i=0;i < ca.length;i++) {
         var c = ca[i];
         while (c.charAt(0)==' ') {
             c = c.substring(1,c.length);
         }
         if (c.indexOf(nameEQ) == 0) {
             return c.substring(nameEQ.length,c.length);
         }
     }
     return null;
   }
   function check_login_for_payment() {
     // alert("This works");
     if(readCookie("email") != null) {
     //  alert(readCookie("email")  + " login");
      document.getElementById('username_id').value=readCookie("email");
     } else {
       alert("Login required before purchase");
       window.location.replace('login_register');
     }
   }
   check_login_for_payment();

   function sendToHomePage()
   {
     DeleteAllCookies();
     window.location.href = '/home/';
   }

   function logout()
   {
    eraseCookie("username");
    eraseCookie("email");
    eraseCookie("tracking_id");
    DeleteAllCookies();
    eraseCookie("Destination");
    eraseCookie("csrftoken");
    eraseCookie("Total");
    eraseCookie("Store");
    eraseCookie("gsScrollPos-794");

     window.location.href = '/home/';

   }
 </script>
<script src="../../static/jquery.min.js"></script>
</body>
</html>


<!-- THIS IS FOR THE SCRIPT -->
<!-- <script src="../../static/creditcardvalidation.js"></script> -->
